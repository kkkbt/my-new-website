{% include "header_footer/head.html" %}

<!--  Link to my css  -->
<link rel="stylesheet" href="../static/scss/index.css">
<link rel="stylesheet" href="../static/scss/contents.css">
<link rel="stylesheet" href="../../static/scss/investment.css">

{% with title=title %}
{% include "header_footer/header.html" %}
{% include "contents/title-screen.html" %}
{% endwith %}

<div class="container">
    <!-- Content here -->
    <div class="row">
        <div class="col-lg-3 col-sm-12">
            <div class="content-table">
                <nav class="nav flex-column">
                    <a class="nav-link" aria-current="page" href="#profit">利益</a>
                    <a class="nav-link" aria-current="page" href="#profit-ranking">利益ランキング</a>

                    {% for year in data.profits_ranking: %}
                    <a class="nav-link sub-nav" aria-current="page" href="#{{ year }}">{{ year }}</a>
                    {% endfor %}
                </nav>
            </div>

        </div>
        <div class="col-lg-9 col-sm-12">
            <div class="content">
                <div class="card-body">
                    <h1 id="profit">利益</h1>
                    <!--Graph-->
                    <canvas class="my-4 chartjs-render-monitor" id="myChart" width="1000" height="700"></canvas>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
                    <script>
                        var ctx = document.getElementById("myChart");
                        var myChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: [],
                                datasets: [{
                                    data: [],
                                    lineTension: 0,
                                    backgroundColor: 'transparent',
                                    borderColor: '#aaa',
                                    borderWidth: 4,
                                    pointBackgroundColor: '#aaa'
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: false
                                        }
                                    }]
                                },
                                legend: {
                                    display: false,
                                }
                            }
                        });
                    </script>
                </div>

                {% for year in data.profits_ranking: %}

                <div class="card-body card-table">
                    <h1 id="profit-ranking">利益ランキング</h1>
                    <h2 id="{{ year }}">{{ year }}</h2>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th scope="col">順位</th>
                            <th scope="col">企業名</th>
                            <th scope="col">取得日</th>
                            <th scope="col">売却日</th>
                            <th scope="col">純利益</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for p_r in data.profits_ranking[year]: %}
                        <tr>
                            <th scope="row">{{ loop.index }}</th>
                            {% for i in range(4) %}
                            <td>{{ p_r[i] }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% endfor %}

            </div>
        </div>

    </div>
</div>

{% include "header_footer/footer.html" %}